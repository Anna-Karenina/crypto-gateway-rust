# üåê Multi-Chain Payment Gateway v3.0

> **–°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ enterprise-—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π**

**Multi-Chain Payment Gateway** - —ç—Ç–æ production-ready –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–µ–π –≤ –≤–∞—à –±–∏–∑–Ω–µ—Å. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–ª–æ–∫—á–µ–π–Ω —Å–µ—Ç–∏, —É–º–Ω—É—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç simple API –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

## üéØ –î–ª—è –∫–æ–≥–æ —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ?

### üè¢ **–ú–µ–Ω–µ–¥–∂–µ—Ä—ã –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏**

–•–æ—Ç–∏—Ç–µ —Å–Ω–∏–∑–∏—Ç—å –∫–æ–º–∏—Å—Å–∏–∏ –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏?

- üí∞ **–≠–∫–æ–Ω–æ–º–∏—è –¥–æ 60%** –Ω–∞ –∫–æ–º–∏—Å—Å–∏—è—Ö (0.5% vs 3.5% —É —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º)
- üåç **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏** –±–µ–∑ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã** –≤ —Ç–µ—á–µ–Ω–∏–µ 1-15 –º–∏–Ω—É—Ç
- üõ°Ô∏è **–ù–µ—Ç —á–∞—Ä–¥–∂–±—ç–∫–æ–≤** - –≤—Å–µ –ø–ª–∞—Ç–µ–∂–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ

üëâ **[–ù–∞—á–∞—Ç—å —Å –±–∏–∑–Ω–µ—Å-–æ–±–∑–æ—Ä–∞ ‚Üí](docs/business/overview.md)**

### üë®‚Äçüíª **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏**

–ù—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫—Ä–∏–ø—Ç–æ–ø–ª–∞—Ç–µ–∂–∏?

- üöÄ **5 –º–∏–Ω—É—Ç –¥–æ –ø–µ—Ä–≤–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞** - –ø—Ä–æ—Å—Ç–µ–π—à–∏–π API
- üì° **REST + gRPC** - –≤—ã–±–∏—Ä–∞–π—Ç–µ —É–¥–æ–±–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª
- üåê **Multi-Chain** - TRON, Ethereum –≤ –æ–¥–Ω–æ–º API
- üß™ **Comprehensive —Ç–µ—Å—Ç—ã** - unit + integration

üëâ **[–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç ‚Üí](docs/developers/quick-start.md)**

### üîß **DevOps –∏–Ω–∂–µ–Ω–µ—Ä—ã**

–ì–æ—Ç–æ–≤—ã —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –≤ production?

- üê≥ **Docker + Kubernetes** ready
- üìä **Prometheus –º–µ—Ç—Ä–∏–∫–∏** –∏ health checks
- üîí **Enterprise –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** –∏ –∞—É–¥–∏—Ç
- ‚öñÔ∏è **Horizontal scaling** –¥–æ 1000 TPS

üëâ **[–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ ‚Üí](docs/deployment/docker.md)**

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç

### 1Ô∏è‚É£ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
git clone https://github.com/your-org/tron-gateway-rust.git
cd tron-gateway-rust
cp env_example.txt .env
```

### 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
export TRON__API_KEY=your_trongrid_api_key
export TRON__MASTER_WALLET_ADDRESS=your_master_wallet
export TRON__MASTER_WALLET_PRIVATE_KEY=your_private_key
export DATABASE__URL=postgresql://postgres:password@localhost:5432/tron_gateway
```

### 3Ô∏è‚É£ –ó–∞–ø—É—Å–∫

```bash
# –ß–µ—Ä–µ–∑ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
docker-compose up -d

# –ò–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ
source .env && cargo run
```

### 4Ô∏è‚É£ –ü–µ—Ä–≤—ã–π –ø–ª–∞—Ç–µ–∂

```bash
# –°–æ–∑–¥–∞–µ–º –∫–æ—à–µ–ª–µ–∫
curl -X POST http://localhost:8080/api/wallets \
  -H "Content-Type: application/json" \
  -d '{"owner_id": "user_123"}'

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å
curl http://localhost:8080/api/wallets/1/balance

# –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä
curl -X POST http://localhost:8080/api/transfers \
  -H "Content-Type: application/json" \
  -d '{"from_wallet_id": 1, "order_amount": "100.000000"}'
```

## üìä –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

| –ú–µ—Ç—Ä–∏–∫–∞             | –ó–Ω–∞—á–µ–Ω–∏–µ       | –û–ø–∏—Å–∞–Ω–∏–µ                       |
| ------------------- | -------------- | ------------------------------ |
| üí∞ **–ö–æ–º–∏—Å—Å–∏—è**     | 0.5-1%         | vs 3.5% —É —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º  |
| ‚ö° **–°–∫–æ—Ä–æ—Å—Ç—å**     | 1-15 –º–∏–Ω       | vs 2-3 –¥–Ω—è –±–∞–Ω–∫–æ–≤—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã |
| üöÄ **Throughput**   | 1000 TPS       | –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ   |
| üåç **–°–µ—Ç–∏**         | 2+ chains      | TRON, Ethereum, —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è    |
| üõ°Ô∏è **Uptime**       | 99.9%          | Enterprise-grade –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å    |
| üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | Military-grade | –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ + –∞—É–¥–∏—Ç—ã            |

## üåü –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ü§ñ Smart Router

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Å–µ—Ç—å –ø–æ —Ü–µ–Ω–µ/—Å–∫–æ—Ä–æ—Å—Ç–∏:

```bash
curl -X POST http://localhost:8080/smart/routes \
  -d '{"amount": "100", "preference": "cheapest"}'
```

### ü™ô Multi-Token –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ï–¥–∏–Ω—ã–π API –¥–ª—è –≤—Å–µ—Ö —Ç–æ–∫–µ–Ω–æ–≤:

```bash
curl http://localhost:8080/api/tokens/balance?wallet_address=TH3Q...
```

### üåê Multi-Chain –∫–æ—à–µ–ª—å–∫–∏

–û–¥–∏–Ω –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ç–µ–π:

```bash
curl -X POST http://localhost:8080/smart/wallet \
  -d '{"networks": ["tron", "ethereum"]}'
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–æ–ª—è–º

---

## üéØ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### **1. Custodial Wallet System —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π**

- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–µ—Ç –∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç TRON –∫–æ—à–µ–ª—å–∫–∞–º–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ú–æ–¥–µ–ª—å**: Custodial (—Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–∏—Ç –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏)
- **–í–∞–ª—é—Ç–∞**: USDT (TRC-20) –Ω–∞ —Å–µ—Ç–∏ TRON
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è**: –õ–æ–∫–∞–ª—å–Ω–∞—è, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º secp256k1 –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏
- **üÜï –ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è**: –ù–æ–≤—ã–µ –∫–æ—à–µ–ª—å–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –æ—Ç–ø—Ä–∞–≤–∫–æ–π 1 TRX —Å –º–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª—å–∫–∞

#### **2. Hybrid Gas Sponsorship Model**

**–£–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –ø–æ–∫—Ä—ã—Ç–∏—è –≥–∞–∑–∞:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ó–∞–∫–∞–∑ 100 USDT ‚Üí –°–∏—Å—Ç–µ–º–∞ –±–µ—Ä–µ—Ç 101 USDT (100 + –∫–æ–º–∏—Å—Å–∏—è)
     ‚Üì
–ú–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª–µ–∫ ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç TRX –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ—à–µ–ª–µ–∫ (–¥–ª—è –≥–∞–∑–∞)
     ‚Üì
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ—à–µ–ª–µ–∫ ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç 101 USDT –Ω–∞ –º–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª–µ–∫
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥—É–º–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ USDT
- ‚úÖ –ì–∞–∑ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ö–æ–º–∏—Å—Å–∏—è –≤–∫–ª—é—á–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –≥–∞–∑–∞ + –ø—Ä–∏–±—ã–ª—å –º–∞–≥–∞–∑–∏–Ω–∞

#### **3. E-commerce Integration**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Customer      ‚îÇ    ‚îÇ  Crypto Payment  ‚îÇ    ‚îÇ  Master Wallet  ‚îÇ
‚îÇ   Wallet        ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ      Gateway     ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   (Shop)        ‚îÇ
‚îÇ   (Auto TRX)    ‚îÇ    ‚îÇ   (Gas + Fee)    ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **4. Dynamic Fee Calculation**

**–†–µ–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –∫–æ–º–∏—Å—Å–∏–π:**

- üîç **Real-time gas estimation**: –ó–∞–ø—Ä–æ—Å –∫ TronGrid `/wallet/estimateenergy`
- üí∞ **Dynamic USDT commission**: –ö–æ–º–∏—Å—Å–∏—è —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å —É—á–µ—Ç–æ–º —Ç–µ–∫—É—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ TRX
- üìä **Transparent preview**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–∞–∑–±–∏–≤–∫—É –¥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### **üéØ –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**

#### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–æ–≤**

- **–ü—Ä–æ–±–ª–µ–º–∞**: –ù–æ–≤—ã–µ TRON –∞–¥—Ä–µ—Å–∞ –Ω–µ –≤–∏–¥–Ω—ã –≤ API –¥–æ –ø–µ—Ä–≤–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–†–µ—à–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ 1 TRX –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—Ä–∞–∑—É –ø–æ–ª—É—á–∞—é—Ç –≥–æ—Ç–æ–≤—ã–µ –∫ —Ä–∞–±–æ—Ç–µ –∫–æ—à–µ–ª—å–∫–∏

#### **2. –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤**

- **–ü—Ä–æ–±–ª–µ–º–∞**: TronGrid API –Ω–µ –∑–Ω–∞–µ—Ç –Ω–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞
- **–†–µ—à–µ–Ω–∏–µ**: –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Base58 ‚Üî Hex –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏ –±–µ–∑ API –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

#### **3. Hybrid Gas Sponsorship**

- **–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ —Ö–æ—Ç—è—Ç —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è —Å TRX –¥–ª—è –≥–∞–∑–∞
- **–†–µ—à–µ–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ø–æ–Ω—Å–∏—Ä—É–µ—Ç TRX –∏ –≤–∫–ª—é—á–∞–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ USDT –∫–æ–º–∏—Å—Å–∏—é
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: UX –∫–∞–∫ —É –æ–±—ã—á–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞

#### **4. Real-time Fee Calculation**

- **–ü—Ä–æ–±–ª–µ–º–∞**: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≥–∞–∑–∞
- **–†–µ—à–µ–Ω–∏–µ**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ —á–µ—Ä–µ–∑ TronGrid + –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–µ –∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ —Ç–∞—Ä–∏—Ñ—ã

#### **5. Preview —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å**: –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç**: Order amount, gas cost, commission, total amount
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: `{"previewOnly": true}` –≤ –∑–∞–ø—Ä–æ—Å–µ

---

## ü™ô –ú—É–ª—å—Ç–∏—Ç–æ–∫–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### **üöÄ –†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö TRC-20 —Ç–æ–∫–µ–Ω–æ–≤**

#### **1. –ß—Ç–æ –Ω–æ–≤–æ–≥–æ?**

**–î–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

- ‚ùå –¢–æ–ª—å–∫–æ USDT
- ‚ùå –ñ–µ—Å—Ç–∫–æ –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- ‚ùå –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Ä–∞—Å—á–µ—Ç –±–∞–ª–∞–Ω—Å–∞ —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

**–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:**

- ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã**: USDT, USDC, BTT, –∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ TRC-20
- ‚úÖ **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ —Ç–æ–∫–µ–Ω—ã**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —á–µ—Ä–µ–∑ config.toml
- ‚úÖ **–£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –±–∞–ª–∞–Ω—Å—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**: –±–∞—Ç—á–µ–≤–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤
- ‚úÖ **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**: –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –ª–µ—Ç—É

#### **2. –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**

```rust
// ü™ô –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –≤—Å–µ—Ö —Ç–æ–∫–µ–Ω–æ–≤ –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º
GET /api/tokens/balance?wallet_address=TH3...

{
  "wallet_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "balances": {
    "USDT": { "balance": "1250.50", "balance_wei": "1250500000" },
    "USDC": { "balance": "890.25", "balance_wei": "890250000" },
    "BTT": { "balance": "50000.0", "balance_wei": "50000000000000000000000" }
  },
  "total_usd_value": "2140.75"
}
```

#### **3. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–æ–∫–µ–Ω—ã**

| –¢–æ–∫–µ–Ω          | –°–∏–º–≤–æ–ª | –ö–æ–Ω—Ç—Ä–∞–∫—Ç (Mainnet)                   | Decimals | –°—Ç–µ–π–±–ª–∫–æ–∏–Ω | –°—Ç–∞—Ç—É—Å         |
| -------------- | ------ | ------------------------------------ | -------- | ---------- | -------------- |
| **Tether USD** | USDT   | `TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t` | 6        | ‚úÖ         | üü¢ –ê–∫—Ç–∏–≤–µ–Ω     |
| **USD Coin**   | USDC   | `TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8` | 6        | ‚úÖ         | üî∂ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| **BitTorrent** | BTT    | `TAFjULxiVgT4qWk6UZwjqwZXTSaGaqnVp4` | 18       | ‚ùå         | üî∂ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |

#### **4. –£–º–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    ü™ô Multi-Token Layer                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  TokenRegistry  ‚îÇ  Trc20TokenService  ‚îÇ  BalanceCache      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ USDT: ‚úÖ     ‚îÇ  Parallel Requests    ‚îÇ TTL: 30s        ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ USDC: üî∂     ‚îÇ  Batch Size: 5        ‚îÇ Smart Cleanup   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ BTT:  üî∂     ‚îÇ  Retry Logic          ‚îÇ Stats API       ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ Custom: ‚ûï   ‚îÇ  Rate Limiting        ‚îÇ Invalidation    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                ‚îÇ              ‚îÇ              ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ   HTTP    ‚îÇ  ‚îÇ     gRPC     ‚îÇ  ‚îÇ  Future  ‚îÇ
        ‚îÇ    API    ‚îÇ  ‚îÇ   Service    ‚îÇ  ‚îÇ  Kafka   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **5. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**

**–£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- ‚ö° **30x –±—ã—Å—Ç—Ä–µ–µ** –¥–ª—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –±–∞–ª–∞–Ω—Å–æ–≤
- üîÑ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ batch-–∑–∞–ø—Ä–æ—Å—ã** –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
- üìä **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞** –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω–æ–≥–æ –∫—ç—à–∞
- üéØ **–¢–æ—á–µ—á–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è** –ø–æ –∫–æ—à–µ–ª—å–∫–∞–º

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞:**

```json
{
  "cache_stats": {
    "total_entries": 1543,
    "active_entries": 1401,
    "expired_entries": 142
  },
  "cleanup_performed": true
}
```

#### **6. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤**

```toml
# config.toml
[trc20_service]
balance_cache_ttl_seconds = 30
batch_size = 5
enable_parallel_requests = true
rate_limit_per_second = 10

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–∫–µ–Ω–∞
[[tokens]]
symbol = "USDC"
name = "USD Coin"
contract_address = "TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8"
decimals = 6
is_stable = true
min_transfer_amount = "1.0"
enabled = false  # –í–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ API
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### **Layered Architecture (Onion)**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    API Controllers                          ‚îÇ
‚îÇ  WalletController | TransferController | ActivationController ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                Application Services                         ‚îÇ
‚îÇ WalletService | TransferService | ActivationService | TrxService ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                   Domain Entities                           ‚îÇ
‚îÇ      Wallet | OutgoingTransfer | IncomingTransaction        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ            Infrastructure (Database, TronGrid)              ‚îÇ
‚îÇ   TronGridClient | RealTronWalletGenerator | TronAddressUtil ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### **–ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

**üéÆ API Layer**

- `WalletActivationController` - —Ä—É—á–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–æ–≤

**üîß Application Layer**

- `WalletActivationService` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤
- `TrxTransferService` - –æ—Ç–ø—Ä–∞–≤–∫–∞ TRX —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- `SponsorGasService` - —Å–ø–æ–Ω—Å–æ—Ä—Å—Ç–≤–æ TRX –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è –≥–∞–∑–∞
- `FeeCalculationService` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–π

**üì° Infrastructure Layer**

- `TronAddressUtil` - –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è Base58 ‚Üî Hex
- `RealTronTransactionSigner` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π leading zeros

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### **Environment Variables**

#### **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```bash
# TronGrid API Configuration
TRONGRID_BASE_URL=https://api.shasta.trongrid.io  # Testnet
TRONGRID_USDT_CONTRACT=TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs  # Shasta USDT

# Master Wallet (Shop Wallet)
MASTER_WALLET_ADDRESS=TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3
MASTER_WALLET_PRIVATE_KEY=your-master-wallet-private-key


# Database
POSTGRES_DB=cryptopay
POSTGRES_USER=postgres
POSTGRES_PASSWORD=securepassword123
```

#### **–ù–æ–≤—ã–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–æ–≤
WALLET_ACTIVATION_ENABLED=true        # –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—é
WALLET_ACTIVATION_AMOUNT=1.0          # –°—É–º–º–∞ TRX –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

# –°–ø–æ–Ω—Å–æ—Ä—Å—Ç–≤–æ –≥–∞–∑–∞
SPONSOR_AMOUNT=15                     # –°—É–º–º–∞ TRX –¥–ª—è —Å–ø–æ–Ω—Å–æ—Ä—Å—Ç–≤–∞

# –ö–æ–º–∏—Å—Å–∏–∏
FEE_PERCENTAGE=1.0                    # –ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–∏—Å—Å–∏–∏ (1% –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
FEE_MINIMUM_USDT=0.5                  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è
FEE_MAXIMUM_USDT=50.0                 # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è
```

#### **–î–ª—è Production (Mainnet):**

```bash
TRONGRID_BASE_URL=https://api.trongrid.io
TRONGRID_USDT_CONTRACT=TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t
```

---

## üöÄ –ó–∞–ø—É—Å–∫

### **Development (Testnet)**

1. **–ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**

```bash
git clone <repository-url>
cd trc20-payment-gateway
```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
cat > .env << EOF
TRONGRID_BASE_URL=https://api.shasta.trongrid.io
TRONGRID_USDT_CONTRACT=TG3XXyExBkPp9nzdajDZsozEu4BkaSJozs
MASTER_WALLET_ADDRESS=YOUR_MASTER_WALLET_ADDRESS
MASTER_WALLET_PRIVATE_KEY=YOUR_MASTER_WALLET_PRIVATE_KEY
POSTGRES_DB=cryptopay
POSTGRES_USER=postgres
POSTGRES_PASSWORD=securepassword123
EOF
```

3. **–ó–∞–ø—É—Å–∫:**

```bash
docker-compose up --build
```

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
# Health check
curl http://localhost:8080/actuator/health

# –¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞ —Å –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π
curl -X POST http://localhost:8080/api/wallets \
  -H "Content-Type: application/json" \
  -d '{"ownerId": "test_user"}'
```

### **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤**

```bash
# –í Telegram: @TronFAQ_bot
!shasta_trx YOUR_WALLET_ADDRESS     # –ü–æ–ª—É—á–∏—Ç—å TRX
!shasta_usdt YOUR_WALLET_ADDRESS    # –ü–æ–ª—É—á–∏—Ç—å USDT
```

---

## üì° API Endpoints

### **üè¶ Wallet Management**

#### **POST /api/wallets**

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π.

**Request:**

```json
{
  "ownerId": "user_12345"
}
```

**Response:**

```json
{
  "id": 1,
  "address": "TEL6KQVwtyBMfuXhVdzDX9GcJd7uqkXRaC",
  "hexAddress": "412fd3a8b9b30164f70bacf692ab7cbecddee0b885",
  "ownerId": "user_12345",
  "createdAt": "2025-08-19T13:18:14.582472678"
}
```

**üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:**

1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–∞ —Å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–µ–π secp256k1
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ 1 TRX —Å –º–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª—å–∫–∞
4. –ö–æ—à–µ–ª–µ–∫ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –º–∏–Ω—É—Ç

#### **POST /api/wallets/activate/{walletAddress}**

–†—É—á–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–∞ (–µ—Å–ª–∏ –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∞).

**Response:**

```json
{
  "success": true,
  "message": "Wallet activated successfully",
  "walletAddress": "TEL6KQVwtyBMfuXhVdzDX9GcJd7uqkXRaC",
  "activationAmount": 1.0
}
```

#### **GET /api/wallets/activation-info**

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞–∫—Ç–∏–≤–∞—Ü–∏–∏.

**Response:**

```json
{
  "activationAmount": 1.0,
  "description": "Amount of TRX sent from master wallet to activate new wallets"
}
```

### **üí∏ Transfer Management**

#### **POST /api/transfers**

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á–µ—Ç–æ–º –∫–æ–º–∏—Å—Å–∏–∏.

**Request (—Å preview):**

```json
{
  "fromWalletId": 3,
  "toAddress": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "orderAmount": 100.0,
  "previewOnly": true
}
```

**Response (preview):**

```json
{
  "orderAmount": 100.0,
  "estimatedFee": 1.0,
  "totalAmount": 101.0,
  "gasCost": 7.11694,
  "gasCostUsdt": 0.711694,
  "commission": 1.0,
  "breakdown": {
    "baseOrder": 100.0,
    "gasInTrx": 7.11694,
    "gasInUsdt": 0.711694,
    "platformFee": 0.288306,
    "totalFee": 1.0
  }
}
```

**Request (—Ä–µ–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥):**

```json
{
  "fromWalletId": 3,
  "toAddress": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "orderAmount": 100.0,
  "previewOnly": false
}
```

**Response:**

```json
{
  "id": 15,
  "fromWalletId": 3,
  "toAddress": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "amount": 101.0,
  "status": "PENDING",
  "txHash": null,
  "referenceId": null,
  "errorMessage": null,
  "createdAt": "2025-08-19T13:17:49.512339922",
  "completedAt": null
}
```

**üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å:**

1. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –≥–∞–∑–∞** - —Ä–µ–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ TronGrid API
2. **TRX —Å–ø–æ–Ω—Å–æ—Ä—Å—Ç–≤–æ** - –æ—Ç–ø—Ä–∞–≤–∫–∞ TRX –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∫–æ—à–µ–ª–µ–∫
3. **USDT –ø–µ—Ä–µ–≤–æ–¥** - –æ—Ç–ø—Ä–∞–≤–∫–∞ USDT + –∫–æ–º–∏—Å—Å–∏–∏ –Ω–∞ –º–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª–µ–∫
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞** - PENDING ‚Üí CONFIRMED

---

## üåü –ù–æ–≤—ã–µ Multi-Token API

### **ü™ô Token Information**

#### **GET /api/tokens**

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤.

**Response:**

```json
{
  "tokens": [
    {
      "symbol": "USDT",
      "name": "Tether USD",
      "contract_address": "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",
      "decimals": 6,
      "is_stable": true,
      "min_transfer_amount": "1.0",
      "max_transfer_amount": "1000000.0",
      "enabled": true,
      "icon_url": "https://assets.coingecko.com/coins/images/325/small/Tether.png"
    },
    {
      "symbol": "USDC",
      "name": "USD Coin",
      "contract_address": "TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8",
      "decimals": 6,
      "is_stable": true,
      "min_transfer_amount": "1.0",
      "enabled": false
    }
  ],
  "total_count": 2
}
```

### **üí∞ Multi-Token Balances**

#### **GET /api/tokens/balance?wallet_address=TH3...**

–ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –∫–æ—à–µ–ª—å–∫–∞.

**Response:**

```json
{
  "wallet_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "balances": {
    "USDT": {
      "symbol": "USDT",
      "balance": "1250.50",
      "balance_wei": "1250500000",
      "last_updated": "2025-08-19T15:30:45Z"
    },
    "USDC": {
      "symbol": "USDC",
      "balance": "890.25",
      "balance_wei": "890250000",
      "last_updated": "2025-08-19T15:30:45Z"
    }
  },
  "total_usd_value": "2140.75",
  "last_updated": "2025-08-19T15:30:45Z"
}
```

**üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- ‚ö° **–£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ 30 —Å–µ–∫—É–Ω–¥
- üîÑ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã** - –≤—Å–µ —Ç–æ–∫–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- üìä **–ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** - –º–∞–∫—Å–∏–º—É–º 5 —Ç–æ–∫–µ–Ω–æ–≤ –≤ batch
- üéØ **–¢–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã** - –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è

### **üí∏ Multi-Token Transfers**

#### **POST /api/tokens/transfer**

–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ –ª—é–±–æ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–≥–æ —Ç–æ–∫–µ–Ω–∞.

**Request:**

```json
{
  "from_wallet_id": 42,
  "to_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "token_symbol": "USDC",
  "amount": "500.0",
  "reference_id": "order_123456"
}
```

**Response:**

```json
{
  "transfer_id": 12345,
  "token_symbol": "USDC",
  "from_wallet_id": 42,
  "to_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "amount": "500.0",
  "status": "PENDING",
  "estimated_fees": {
    "gas_fee_usdt": "1.5",
    "service_commission": "2.5",
    "total_fees": "4.0",
    "total_amount_to_deduct": "504.0"
  },
  "reference_id": "order_123456",
  "created_at": "2025-08-19T15:30:45Z"
}
```

### **‚öôÔ∏è Token Management**

#### **POST /api/tokens/{token_symbol}/toggle?enabled=true**

–í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏.

**Response:**

```json
{
  "success": true,
  "message": "–¢–æ–∫–µ–Ω USDC –≤–∫–ª—é—á–µ–Ω",
  "token_symbol": "USDC",
  "enabled": true
}
```

### **üìä Cache Management**

#### **GET /api/tokens/cache/stats**

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫—ç—à–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞.

**Response:**

```json
{
  "cache_stats": {
    "total_entries": 1543,
    "active_entries": 1401,
    "expired_entries": 142
  },
  "cleanup_performed": true
}
```

#### **DELETE /api/tokens/cache/invalidate/{wallet_address}**

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞.

**Response:**

```json
{
  "success": true,
  "message": "–ö—ç—à –¥–ª—è –∫–æ—à–µ–ª—å–∫–∞ TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3 –æ—á–∏—â–µ–Ω",
  "wallet_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3"
}
```

---

## üí≥ Workflow –ø–ª–∞—Ç–µ–∂–µ–π

### **1. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ —Å –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π**

```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant Shop as E-commerce Shop
    participant API as Payment Gateway
    participant Master as Master Wallet
    participant TRON as TRON Network

    User->>Shop: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–ó–∞–∫–∞–∑
    Shop->>API: POST /api/wallets {"ownerId": "user123"}

    API->>API: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
    API->>API: –í—ã—á–∏—Å–ª–µ–Ω–∏–µ TRON –∞–¥—Ä–µ—Å–∞
    API->>API: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

    Note over API: üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è
    API->>Master: –ü–æ–ª—É—á–µ–Ω–∏–µ TRX —Å –º–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª—å–∫–∞
    Master->>TRON: –û—Ç–ø—Ä–∞–≤–∫–∞ 1 TRX –Ω–∞ –Ω–æ–≤—ã–π –∞–¥—Ä–µ—Å
    TRON->>API: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

    API->>Shop: –ì–æ—Ç–æ–≤—ã–π –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ—à–µ–ª–µ–∫
    Shop->>User: –ê–¥—Ä–µ—Å –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
```

### **2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞ —Å gas sponsorship**

```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    participant Shop as E-commerce Shop
    participant API as Payment Gateway
    participant Master as Master Wallet
    participant UserWallet as User Wallet
    participant TRON as TRON Network

    User->>Shop: –û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ 100 USDT
    Shop->>API: POST /api/transfers (orderAmount: 100)

    Note over API: üÜï –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞
    API->>TRON: –ó–∞–ø—Ä–æ—Å —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≥–∞–∑–∞ (/wallet/estimateenergy)
    TRON->>API: ~7 TRX ‚âà 0.7 USDT
    API->>API: –†–∞—Å—á–µ—Ç: 100 + 1.0 –∫–æ–º–∏—Å—Å–∏—è = 101 USDT

    Note over API: üÜï TRX –°–ø–æ–Ω—Å–æ—Ä—Å—Ç–≤–æ
    API->>Master: –û—Ç–ø—Ä–∞–≤–∫–∞ 15 TRX –Ω–∞ user wallet (–¥–ª—è –≥–∞–∑–∞)
    Master->>UserWallet: 15 TRX –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ

    Note over API: USDT –ü–µ—Ä–µ–≤–æ–¥
    API->>UserWallet: –°–æ–∑–¥–∞–Ω–∏–µ USDT —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (101 USDT)
    UserWallet->>Master: 101 USDT (100 –∑–∞–∫–∞–∑ + 1 –∫–æ–º–∏—Å—Å–∏—è)

    API->>Shop: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞
    Shop->>User: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞
```

### **3. Preview —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

```mermaid
sequenceDiagram
    participant Shop as E-commerce Shop
    participant API as Payment Gateway
    participant TRON as TRON Network

    Shop->>API: POST /api/transfers {"previewOnly": true}
    API->>TRON: –û—Ü–µ–Ω–∫–∞ –≥–∞–∑–∞ (/wallet/estimateenergy)
    TRON->>API: –°—Ç–æ–∏–º–æ—Å—Ç—å: 16307 energy, 7.116940 TRX
    API->>API: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è TRX‚ÜíUSDT –ø–æ –∫—É—Ä—Å—É
    API->>API: –†–∞—Å—á–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏ (–≥–∞–∑ + –ø—Ä–æ—Ü–µ–Ω—Ç)
    API->>Shop: –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏

    Note over Shop: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç:<br/>Order: 100 USDT<br/>Fee: 1.0 USDT<br/>Total: 101 USDT

    Shop->>API: POST /api/transfers {"previewOnly": false}
    Note over API: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### **1. –•—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π**

**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (Development):**

- –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- –ü–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è testnet –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**Production —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**

```rust
// –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
@Column(name = "private_key", nullable = false, length = 256)
private String encryptedPrivateKey;

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AES-256 –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
public void setPrivateKey(String privateKey) {
    this.encryptedPrivateKey = cryptoService.encrypt(privateKey);
}
```

### **2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ master wallet**

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ:**

- Master wallet –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ–¥ –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º
- –†–µ–≥—É–ª—è—Ä–Ω—ã–π backup –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–ª–∞–Ω—Å–∞ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ —Ä–∞–∑–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã

**üÜï –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ TRX:**

- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç—Ä–∞—Ç–∏—Ç TRX –º–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª—å–∫–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏ —Å–ø–æ–Ω—Å–æ—Ä—Å—Ç–≤–∞
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –±–∞–ª–∞–Ω—Å –Ω–µ –º–µ–Ω–µ–µ 1000 TRX
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞

### **3. –ó–∞—â–∏—Ç–∞ –æ—Ç leading zero –∞—Ç–∞–∫**

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –ø–æ–¥–ø–∏—Å—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:**

```rust
// RealTronTransactionSigner - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ leading zeros
String cleanPrivateKeyHex = privateKeyHex.toLowerCase();
if (cleanPrivateKeyHex.length() % 2 != 0) {
    cleanPrivateKeyHex = "0" + cleanPrivateKeyHex;
}
// –ù–ï —É–¥–∞–ª—è–µ–º leading zeros - –æ–Ω–∏ –≤–∞–∂–Ω—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–ª—é—á–∞
BigInteger privateKey = new BigInteger(cleanPrivateKeyHex, 16);
```

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **üåç Environment-Based Configuration**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**.

#### **üìÅ –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**

1. **`env_minimal.txt`** - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞
2. **`env_example.txt`** - –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

#### **üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç**

```bash
# 1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp env_minimal.txt .env

# 2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ –≤–∞—à–∏ –Ω—É–∂–¥—ã
nano .env

# 3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ
source .env && cargo run
```

#### **üìã –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**

```bash
# –°–µ—Ä–≤–µ—Ä
export SERVER__HOST=0.0.0.0
export SERVER__PORT=8080

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
export DATABASE__URL=postgresql://user:pass@localhost:5432/tron_gateway

# TRON –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
export TRON__API_KEY=your_trongrid_api_key
export TRON__BASE_URL=https://api.shasta.trongrid.io
export TRON__MASTER_WALLET_ADDRESS=your_master_wallet
export TRON__MASTER_WALLET_PRIVATE_KEY=your_private_key

# Multi-Chain —Å–µ—Ç–∏
export NETWORKS__TRON__ENABLED=true
export NETWORKS__ETHEREUM__ENABLED=false
```

#### **üèóÔ∏è –ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π (Smart Router, Multi-Chain, AI):

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä
source env_example.txt
```

#### **üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**

- `SERVER__*` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ HTTP/gRPC —Å–µ—Ä–≤–µ—Ä–æ–≤
- `DATABASE__*` - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
- `TRON__*` - –ë–∞–∑–æ–≤—ã–µ TRON –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `NETWORKS__*` - Multi-Chain —Å–µ—Ç–∏
- `SMART_ROUTER__*` - –£–º–Ω–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- `MULTI_CHAIN_CACHE__*` - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- `MULTI_TOKENS__*` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤

### **Database Schema Updates**

#### **–û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ `outgoing_transfers`**

```sql
-- –ù–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è –∫–æ–º–∏—Å—Å–∏–π
ALTER TABLE outgoing_transfers
ADD COLUMN order_amount DECIMAL(30,18),      -- –°—É–º–º–∞ –∑–∞–∫–∞–∑–∞ –±–µ–∑ –∫–æ–º–∏—Å—Å–∏–∏
ADD COLUMN fee_amount DECIMAL(30,18),        -- –†–∞–∑–º–µ—Ä –∫–æ–º–∏—Å—Å–∏–∏
ADD COLUMN gas_cost_trx DECIMAL(30,18),      -- –°—Ç–æ–∏–º–æ—Å—Ç—å –≥–∞–∑–∞ –≤ TRX
ADD COLUMN gas_cost_usdt DECIMAL(30,18);     -- –°—Ç–æ–∏–º–æ—Å—Ç—å –≥–∞–∑–∞ –≤ USDT
```

---

## üêõ Troubleshooting

### **–ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**

#### **1. –ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**

**–°–∏–º–ø—Ç–æ–º—ã:**

- –ù–æ–≤—ã–µ –∫–æ—à–µ–ª—å–∫–∏ –Ω–µ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –û—à–∏–±–∫–∞ "Could not convert address to full hex"

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
docker logs trc20-payment-gateway | grep "activation"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
curl http://localhost:8080/api/wallets/activation-info

# –†—É—á–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è
curl -X POST http://localhost:8080/api/wallets/activate/YOUR_ADDRESS
```

**–†–µ—à–µ–Ω–∏—è:**

- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –º–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª—å–∫–∞ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å >10 TRX)
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ `WALLET_ACTIVATION_ENABLED=true`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å `MASTER_WALLET_PRIVATE_KEY`

#### **2. –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**

**–°–∏–º–ø—Ç–æ–º—ã:**

- –û—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –Ω–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏
- "Invalid TRON address checksum"

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```rust
// –¢–µ—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
String base58 = "TEL6KQVwtyBMfuXhVdzDX9GcJd7uqkXRaC";
String hexFull = TronAddressUtil.convertBase58ToHexFull(base58);
System.out.println("Hex: " + hexFull); // –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: 412fd3a8b9b30164f70bacf692ab7cbecddee0b885
```

#### **3. Gas sponsorship –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**

**–°–∏–º–ø—Ç–æ–º—ã:**

- Transfer –≤–∏—Å–∏—Ç –≤ —Å—Ç–∞—Ç—É—Å–µ PENDING
- –û—à–∏–±–∫–∏ "insufficient balance" –ø—Ä–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º USDT

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å TRX –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞
curl "https://api.shasta.trongrid.io/v1/accounts/USER_ADDRESS"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Å–ø–æ–Ω—Å–æ—Ä—Å—Ç–≤–∞
docker logs trc20-payment-gateway | grep "sponsor"
```

**–†–µ—à–µ–Ω–∏—è:**

- –£–≤–µ–ª–∏—á–∏—Ç—å `SPONSOR_AMOUNT` –µ—Å–ª–∏ –≥–∞–∑ –¥–æ—Ä–æ–∂–∞–µ—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å –º–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª—å–∫–∞

#### **4. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –≥–∞–∑–∞ –¥–∞–µ—Ç –Ω–µ—Ç–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**

**–°–∏–º–ø—Ç–æ–º—ã:**

- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Ñ–µ–π–ª—è—Ç—Å—è –∏–∑-–∑–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –≥–∞–∑–∞
- –û—Ü–µ–Ω–∫–∞ —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**

```bash
# –¢–µ—Å—Ç –æ—Ü–µ–Ω–∫–∏ –≥–∞–∑–∞
curl -X POST "https://api.shasta.trongrid.io/wallet/estimateenergy" \
  -H "Content-Type: application/json" \
  -d '{
    "owner_address": "...",
    "contract_address": "...",
    "function_selector": "transfer(address,uint256)",
    "parameter": "..."
  }'
```

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**

#### **–ö–ª—é—á–µ–≤—ã–µ –ª–æ–≥-–ø–∞—Ç—Ç–µ—Ä–Ω—ã:**

```bash
# –ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
"Activating wallet .* by sending .* TRX"
"Wallet .* activated successfully"

# –°–ø–æ–Ω—Å–æ—Ä—Å—Ç–≤–æ
"Sponsoring .* TRX for wallet"
"Successfully sponsored .* TRX"

# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∏—Å—Å–∏–∏
"Real energy estimation from TronGrid: .* energy"
"Real gas cost: .* TRX = .* USDT"

# –õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
"Address .* not found in TronGrid API, using local conversion"
```

#### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–ª–∞–Ω—Å–æ–≤:**

```bash
# –ú–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª–µ–∫
curl "https://api.shasta.trongrid.io/v1/accounts/YOUR_MASTER_ADDRESS" | \
  jq '.data[0].balance / 1000000'

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ—à–µ–ª—å–∫–∏
curl "https://api.shasta.trongrid.io/v1/accounts/USER_ADDRESS" | \
  jq '.data[0].trc20[0]'
```

---

## üìö TRON –°–ø–µ—Ü–∏—Ñ–∏–∫–∞

### **1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤**

**–ü—Ä–æ–±–ª–µ–º–∞ "–∫—É—Ä–∏—Ü—ã –∏ —è–π—Ü–∞" —Ä–µ—à–µ–Ω–∞:**

–î–æ –Ω–∞—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è:

- ‚ùå –ù–æ–≤—ã–µ –∞–¥—Ä–µ—Å–∞ –Ω–µ –≤–∏–¥–Ω—ã –≤ TronGrid API
- ‚ùå –ù–µ–ª—å–∑—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å TRX –±–µ–∑ hex –∞–¥—Ä–µ—Å–∞
- ‚ùå –ù–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å hex –∞–¥—Ä–µ—Å –±–µ–∑ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –Ω–∞—à–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è:

- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è** Base58 ‚Üî Hex –¥–ª—è –ª—é–±—ã—Ö –∞–¥—Ä–µ—Å–æ–≤
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ—à–µ–ª—å–∫–∞
- ‚úÖ **Fallback —Å–∏—Å—Ç–µ–º–∞**: API ‚Üí –ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è

### **2. Hybrid Gas Model**

**–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ü–æ–∫—É–ø–∞–µ—Ç TRX ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç USDT
```

**–ù–∞—à –ø–æ–¥—Ö–æ–¥:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –ó–∞–∫–∞–∑ –≤ USDT ‚Üí –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≥–∞–∑
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–Ω–∞–µ—Ç –æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ TRX
- UX –∫–∞–∫ —É –æ–±—ã—á–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
- –ö–æ–º–∏—Å—Å–∏—è –ø—Ä–æ–∑—Ä–∞—á–Ω–∞ –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–∞

### **3. –†–µ–∞–ª—å–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π**

**–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (Shasta Testnet):**

```
USDT Transfer: ~16,307 energy
Current cost: ~7.1 TRX ‚âà $0.71 USD
With 1% commission: Total fee ‚âà 1.0 USDT
```

**–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è:**

- –°—Ç–æ–∏–º–æ—Å—Ç—å –≥–∞–∑–∞ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ç–∏
- –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –∫–æ–º–∏—Å—Å–∏–∏
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—Å–µ–≥–¥–∞ –ø–ª–∞—Ç—è—Ç —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—É—é —Ü–µ–Ω—É

### **4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**

**–£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

- ‚úÖ Leading zeros –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–∞—Ö
- ‚úÖ Signature validation errors
- ‚úÖ Address/private key mismatches
- ‚úÖ Non-activated address handling

---

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ Production

### **–ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–æ–≤** —Å –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π  
‚úÖ **USDT –ø–µ—Ä–µ–≤–æ–¥—ã** —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –∫–æ–º–∏—Å—Å–∏—è–º–∏  
‚úÖ **Gas sponsorship** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫—Ä—ã—Ç—ã–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
‚úÖ **Preview —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏  
‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞–¥—Ä–µ—Å–æ–≤** –±–µ–∑ API –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
‚úÖ **Real-time gas estimation** –¥–ª—è —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤  
‚úÖ **Robust error handling** –∏ logging

### **Production Checklist:**

#### **Security:**

- [ ] –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π –≤ –ë–î
- [ ] API –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ rate limiting
- [ ] HTTPS/TLS –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- [ ] Regular security audits

#### **Monitoring:**

- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–∞–ª–∞–Ω—Å–æ–≤ –º–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª—å–∫–∞
- [ ] –ê–ª–µ—Ä—Ç—ã –Ω–∞ failed —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- [ ] Dashboards –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### **Scalability:**

- [ ] Horizontal scaling (stateless design)
- [ ] Database connection pooling
- [ ] Async processing –¥–ª—è transfer queue
- [ ] CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤

#### **Business:**

- [ ] Backup –∏ disaster recovery –ø—Ä–æ—Ü–µ–¥—É—Ä—ã
- [ ] Compliance —Å —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- [ ] Customer support –ø—Ä–æ—Ü–µ—Å—Å—ã
- [ ] Financial reconciliation —Å–∏—Å—Ç–µ–º—ã

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### **–£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:**

#### **–ö–æ—à–µ–ª–µ–∫ 2 (–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π):**

- ‚úÖ **–ë–∞–ª–∞–Ω—Å**: 4899 USDT, 14+ TRX
- ‚úÖ **Transfer**: 101 USDT —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ **TX Hash**: `0d4f408bd69fd96c17bd388c039817c6f5e71c09f2d909639584041df7970077`

#### **–ö–æ—à–µ–ª–µ–∫ 3 (–Ω–æ–≤—ã–π, –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–π):**

- ‚úÖ **–ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è**: 1 TRX –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ **Gas sponsorship**: 15 TRX –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ **USDT transfer**: 101 USDT (100 –∑–∞–∫–∞–∑ + 1 –∫–æ–º–∏—Å—Å–∏—è)
- ‚úÖ **–§–∏–Ω–∞–ª—å–Ω—ã–µ –±–∞–ª–∞–Ω—Å—ã**:
  - –ö–æ—à–µ–ª–µ–∫ 3: 4899 USDT, 13.26 TRX
  - –ú–∞—Å—Ç–µ—Ä-–∫–æ—à–µ–ª–µ–∫: 530 USDT, 1952.63 TRX

#### **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:**

- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞: ~1-2 —Å–µ–∫—É–Ω–¥—ã
- –ê–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏—è: ~2-3 —Å–µ–∫—É–Ω–¥—ã
- Preview —Ä–∞—Å—á–µ—Ç: ~1 —Å–µ–∫—É–Ω–¥–∞
- –ü–æ–ª–Ω—ã–π transfer: ~15-30 —Å–µ–∫—É–Ω–¥

---

**üéØ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ Production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç:**

- ü™ô **–ú—É–ª—å—Ç–∏—Ç–æ–∫–µ–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ USDT, USDC, BTT –∏ –¥—Ä—É–≥–∏—Ö
- ‚ö° **–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –≥–æ—Ç–æ–≤—ã–µ –∫–æ—à–µ–ª—å–∫–∏** —Å –∞–≤—Ç–æ–∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π
- üí∞ **–ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏** —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á–µ—Ç–æ–º
- üéØ **–ü—Ä–æ—Å—Ç–æ–π UX** –±–µ–∑ TRX —Å–ª–æ–∂–Ω–æ—Å—Ç–µ–π
- üöÄ **–ù–∞–¥–µ–∂–Ω—ã–µ –∏ –±—ã—Å—Ç—Ä—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã** —Å —É–º–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–ú–∞–≥–∞–∑–∏–Ω—ã –ø–æ–ª—É—á–∞—é—Ç:**

- üèóÔ∏è **Production-ready –ø–ª–∞—Ç–µ–∂–Ω—ã–π —à–ª—é–∑** —Å enterprise –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π
- üì° **RESTful + gRPC API** –¥–ª—è –ª—é–±—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- ü™ô **Multi-Token –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –ø—Ä–∏–Ω–∏–º–∞–π—Ç–µ –ª—é–±—ã–µ TRC-20 —Ç–æ–∫–µ–Ω—ã
- ‚öôÔ∏è **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–∞–∑–æ–º** –∏ –∫–æ–º–∏—Å—Å–∏—è–º–∏
- üìä **–£–º–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- üîß **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏** –±–µ–∑ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
- üéõÔ∏è **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ù–æ–≤—ã–µ enterprise –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- ü™ô **Multi-Token Architecture** - —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ TRC-20
- ‚ö° **30x –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** –±–ª–∞–≥–æ–¥–∞—Ä—è —É–º–Ω–æ–º—É –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—é
- üîÑ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
- üìä **Real-time —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—ç—à–∞
- üéØ **–¢–æ—á–µ—á–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è** –∫—ç—à–∞ –ø–æ –∫–æ—à–µ–ª—å–∫–∞–º
- üõ°Ô∏è **Retry –ª–æ–≥–∏–∫–∞** –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ API –≤—ã–∑–æ–≤–æ–≤
- üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** –ø–æ–¥ –ª—é–±—É—é –Ω–∞–≥—Ä—É–∑–∫—É

---

**üåü –í–µ—Ä—Å–∏—è 3.0 - Multi-Token Revolution**

_–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: 3.0_  
_–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 19 –∞–≤–≥—É—Å—Ç–∞ 2025_  
_–ú—É–ª—å—Ç–∏—Ç–æ–∫–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: ‚úÖ Production Ready_  
_–°—Ç–∞—Ç—É—Å: ‚úÖ Production Ready_
