# üì° HTTP API Documentation

## üéØ –û–±–∑–æ—Ä

Multi-Chain Payment Gateway –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç RESTful HTTP API –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–æ—à–µ–ª—å–∫–∞–º–∏, —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞–º–∏ –∏ multi-chain —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é.

**Base URL**: `http://localhost:8080` (–∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω)  
**Version**: 3.0  
**Content-Type**: `application/json`

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

_–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –í production –≤–µ—Ä—Å–∏–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ JWT/API key –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è._

## üìã –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

### üìä –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤

–í—Å–µ –æ—Ç–≤–µ—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ:

```json
{
  "data": { ... },
  "status": "success",
  "timestamp": "2024-12-20T10:30:00Z"
}
```

### ‚ùå –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```json
{
  "error": {
    "code": "WALLET_NOT_FOUND",
    "message": "Wallet with ID 123 not found",
    "details": { ... }
  },
  "status": "error",
  "timestamp": "2024-12-20T10:30:00Z"
}
```

### üí∞ –î–µ–Ω–µ–∂–Ω—ã–µ —Å—É–º–º—ã

–í—Å–µ –¥–µ–Ω–µ–∂–Ω—ã–µ —Å—É–º–º—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏ —Å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é:

- **USDT/USDC**: `"100.000000"` (6 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)
- **TRX**: `"15.000000"` (6 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)
- **ETH**: `"0.050000000000000000"` (18 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π)

## üè† Health Check

### `GET /health`

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞.

**Response**:

```json
{
  "status": "OK",
  "version": "3.0",
  "timestamp": "2024-12-20T10:30:00Z",
  "components": {
    "database": "healthy",
    "tron_network": "healthy",
    "cache": "healthy"
  }
}
```

## üí≥ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞–º–∏

### `POST /api/wallets`

–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–æ—à–µ–ª—å–∫–∞.

**Request**:

```json
{
  "owner_id": "user_12345" // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**Response**:

```json
{
  "id": 1,
  "address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "hex_address": "41234567890abcdef...",
  "owner_id": "user_12345",
  "is_activated": true,
  "created_at": "2024-12-20T10:30:00Z"
}
```

### `GET /api/wallets/{wallet_id}`

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ—à–µ–ª—å–∫–µ.

**Response**:

```json
{
  "id": 1,
  "address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "owner_id": "user_12345",
  "is_activated": true,
  "created_at": "2024-12-20T10:30:00Z",
  "balance": {
    "USDT": "100.000000",
    "TRX": "15.000000"
  }
}
```

### `GET /api/wallets/{wallet_id}/balance`

–ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∫–æ—à–µ–ª—å–∫–∞.

**Response**:

```json
{
  "wallet_id": 1,
  "balances": {
    "USDT": {
      "balance": "100.000000",
      "balance_usd": "100.00",
      "contract_address": "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t"
    },
    "TRX": {
      "balance": "15.000000",
      "balance_usd": "2.40"
    }
  },
  "total_usd_value": "102.40",
  "last_updated": "2024-12-20T10:30:00Z"
}
```

### `POST /api/wallets/{wallet_id}/activate`

–ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ—à–µ–ª—å–∫–∞ (–æ—Ç–ø—Ä–∞–≤–∫–∞ TRX –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏).

**Response**:

```json
{
  "wallet_id": 1,
  "address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "activation_status": "success",
  "tx_hash": "abc123...",
  "amount_sent": "1.000000"
}
```

## üí∏ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞–º–∏

### `POST /api/transfers/preview`

–ü—Ä–µ–≤—å—é —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ —Å —Ä–∞—Å—á–µ—Ç–æ–º –≤—Å–µ—Ö –∫–æ–º–∏—Å—Å–∏–π.

**Request**:

```json
{
  "from_wallet_id": 1,
  "order_amount": "100.000000",
  "reference_id": "order_12345" // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**Response**:

```json
{
  "order_amount": "100.000000",
  "commission": "5.000000",
  "commission_percentage": "5.00",
  "gas_cost_in_usdt": "2.500000",
  "total_amount": "107.500000",
  "master_wallet_receives": "107.500000",
  "breakdown": "100 USDT –∑–∞–∫–∞–∑ + 5 USDT –∫–æ–º–∏—Å—Å–∏—è + 2.5 USDT –≥–∞–∑ = 107.5 USDT",
  "trx_to_usdt_rate": "0.16",
  "estimated_time": "1-3 minutes",
  "from_wallet_id": 1,
  "reference_id": "order_12345"
}
```

### `POST /api/transfers`

–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞.

**Request**:

```json
{
  "from_wallet_id": 1,
  "order_amount": "100.000000",
  "reference_id": "order_12345", // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "preview_only": false // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é false
}
```

**Response**:

```json
{
  "id": 1,
  "from_wallet_id": 1,
  "to_address": "TYourMasterWalletAddress...",
  "amount": "107.500000",
  "status": "pending",
  "reference_id": "order_12345",
  "created_at": "2024-12-20T10:30:00Z",
  "estimated_completion": "2024-12-20T10:33:00Z"
}
```

### `GET /api/transfers/{transfer_id}`

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–µ.

**Response**:

```json
{
  "id": 1,
  "from_wallet_id": 1,
  "to_address": "TYourMasterWalletAddress...",
  "amount": "107.500000",
  "status": "completed",
  "tx_hash": "abc123def456...",
  "reference_id": "order_12345",
  "error_message": null,
  "created_at": "2024-12-20T10:30:00Z",
  "completed_at": "2024-12-20T10:32:30Z"
}
```

### `GET /api/transfers/reference/{reference_id}`

–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞ –ø–æ reference_id.

**Response**: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ `GET /api/transfers/{transfer_id}`

### `GET /api/wallets/{wallet_id}/transfers`

–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤ –∫–æ—à–µ–ª—å–∫–∞.

**Query params**:

- `limit` (default: 50, max: 100)
- `offset` (default: 0)
- `status` (pending, processing, completed, failed)

**Response**:

```json
{
  "wallet_id": 1,
  "transfers": [
    {
      "id": 1,
      "amount": "107.500000",
      "status": "completed",
      "tx_hash": "abc123...",
      "created_at": "2024-12-20T10:30:00Z"
    }
  ],
  "pagination": {
    "total": 25,
    "limit": 50,
    "offset": 0,
    "has_more": false
  }
}
```

## ü™ô Multi-Token API

### `GET /api/tokens`

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤.

**Response**:

```json
{
  "tokens": [
    {
      "symbol": "USDT",
      "name": "Tether USD",
      "contract_address": "TR7NHqjeKQxGTCi8q8ZY4pL8otSzgjLj6t",
      "decimals": 6,
      "enabled": true,
      "network": "tron"
    },
    {
      "symbol": "USDC",
      "name": "USD Coin",
      "contract_address": "TEkxiTehnzSmSe2XqrBj4w32RUN966rdz8",
      "decimals": 6,
      "enabled": false,
      "network": "tron"
    }
  ]
}
```

### `GET /api/tokens/balance`

–ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –ø–æ –≤—Å–µ–º —Ç–æ–∫–µ–Ω–∞–º.

**Query params**:

- `wallet_address` (required)
- `tokens` (comma-separated, optional)

**Example**: `/api/tokens/balance?wallet_address=TH3Q...&tokens=USDT,USDC`

**Response**:

```json
{
  "wallet_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "balances": {
    "USDT": {
      "balance": "100.000000",
      "balance_usd": "100.00",
      "balance_wei": "100000000"
    },
    "USDC": {
      "balance": "50.000000",
      "balance_usd": "50.00",
      "balance_wei": "50000000"
    }
  },
  "total_usd_value": "150.00",
  "last_updated": "2024-12-20T10:30:00Z"
}
```

### `POST /api/tokens/transfer`

–¢—Ä–∞–Ω—Å—Ñ–µ—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞.

**Request**:

```json
{
  "from_wallet_id": 1,
  "token_symbol": "USDT",
  "amount": "100.000000",
  "reference_id": "token_transfer_123"
}
```

**Response**: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –æ–±—ã—á–Ω–æ–º—É —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä—É

### `POST /api/tokens/{token_symbol}/toggle`

–í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞.

**Request**:

```json
{
  "enabled": true
}
```

**Response**:

```json
{
  "token_symbol": "USDC",
  "enabled": true,
  "message": "Token USDC has been enabled"
}
```

### `GET /api/tokens/cache/stats`

–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞ —Ç–æ–∫–µ–Ω–æ–≤.

**Response**:

```json
{
  "hits": 1250,
  "misses": 50,
  "total_requests": 1300,
  "hit_rate": 96.15,
  "cache_size": 100,
  "last_cleanup": "2024-12-20T10:25:00Z"
}
```

### `DELETE /api/tokens/cache/invalidate/{wallet_address}`

–ò–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–∞ –¥–ª—è –∫–æ—à–µ–ª—å–∫–∞.

**Response**:

```json
{
  "wallet_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "invalidated": true,
  "message": "Cache invalidated for wallet"
}
```

## üåê Smart Router API

### `POST /smart/routes`

–ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞.

**Request**:

```json
{
  "from_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "to_address": "TYourMasterWallet...",
  "amount": "100.000000",
  "token_symbol": "USDT",
  "preference": "balanced" // cheapest, fastest, most_reliable, balanced
}
```

**Response**:

```json
{
  "routes": [
    {
      "id": "tron-route-1",
      "network": "tron",
      "estimated_cost_usd": "2.50",
      "estimated_time_sec": "90",
      "reliability_score": "0.98",
      "total_score": "0.88",
      "recommended": true,
      "details": {
        "gas_fee_native": "15.000000",
        "gas_fee_usd": "2.50",
        "network_congestion": "low",
        "success_rate": "98%"
      }
    },
    {
      "id": "ethereum-route-1",
      "network": "ethereum",
      "estimated_cost_usd": "25.00",
      "estimated_time_sec": "300",
      "reliability_score": "0.99",
      "total_score": "0.65",
      "recommended": false,
      "details": {
        "gas_fee_native": "0.015000000000000000",
        "gas_fee_usd": "25.00",
        "network_congestion": "medium",
        "success_rate": "99%"
      }
    }
  ],
  "analysis_time_ms": "150",
  "recommended_route_id": "tron-route-1"
}
```

### `POST /smart/transfer`

–£–º–Ω—ã–π —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä —Å –∞–≤—Ç–æ–≤—ã–±–æ—Ä–æ–º —Å–µ—Ç–∏.

**Request**:

```json
{
  "from_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "to_address": "TYourMasterWallet...",
  "amount": "100.000000",
  "token_symbol": "USDT",
  "preference": "cheapest",
  "route_id": "tron-route-1" // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã–±–æ—Ä
}
```

**Response**:

```json
{
  "transaction_hash": "abc123def456...",
  "network_used": "tron",
  "actual_cost_usd": "2.45",
  "execution_time_ms": "2500",
  "selected_route": {
    "id": "tron-route-1",
    "network": "tron",
    "estimated_cost_usd": "2.50"
  },
  "status": "success"
}
```

### `POST /smart/balance`

Multi-chain –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞.

**Request**:

```json
{
  "wallet_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "networks": ["tron", "ethereum"], // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "tokens": ["USDT", "USDC"] // –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
}
```

**Response**:

```json
{
  "wallet_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "balances": {
    "tron": {
      "native_balance": "15.000000",
      "tokens": {
        "USDT": {
          "balance": "100.000000",
          "balance_usd": "100.00"
        }
      }
    },
    "ethereum": {
      "native_balance": "0.050000000000000000",
      "tokens": {
        "USDT": {
          "balance": "50.000000",
          "balance_usd": "50.00"
        }
      }
    }
  },
  "total_usd_value": "185.50"
}
```

### `GET /smart/networks`

–°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Å–µ—Ç–µ–π.

**Response**:

```json
{
  "networks": {
    "tron": {
      "enabled": true,
      "health": "healthy",
      "rpc_status": "online",
      "block_height": "65432100",
      "response_time_ms": "150"
    },
    "ethereum": {
      "enabled": true,
      "health": "healthy",
      "rpc_status": "online",
      "block_height": "18750000",
      "response_time_ms": "300"
    }
  },
  "last_updated": "2024-12-20T10:30:00Z"
}
```

### `POST /smart/quote`

–ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –±–µ–∑ –∫—ç—à–∞.

**Request**:

```json
{
  "from_address": "TH3QBLNLsimQbNwq2DxTGhoDYeeCZYTvK3",
  "to_address": "TYourMasterWallet...",
  "amount": "100.000000",
  "token_symbol": "USDT",
  "networks": ["tron", "ethereum"]
}
```

**Response**:

```json
{
  "quotes": {
    "tron": {
      "network": "tron",
      "estimated_cost_usd": "2.50",
      "estimated_time_sec": "90",
      "gas_fee": "15.000000",
      "available": true
    },
    "ethereum": {
      "network": "ethereum",
      "estimated_cost_usd": "25.00",
      "estimated_time_sec": "300",
      "gas_fee": "0.015000000000000000",
      "available": true
    }
  },
  "fastest_network": "tron",
  "cheapest_network": "tron"
}
```

## üîß Network Management API

### `GET /networks`

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—Å–µ—Ö —Å–µ—Ç—è—Ö.

**Response**:

```json
{
  "networks": [
    {
      "name": "tron",
      "chain_id": "728126428",
      "native_currency": "TRX",
      "enabled": true,
      "rpc_url": "https://api.shasta.trongrid.io",
      "confirmation_blocks": 3
    },
    {
      "name": "ethereum",
      "chain_id": "5",
      "native_currency": "ETH",
      "enabled": false,
      "rpc_url": "https://eth-goerli.g.alchemy.com/v2/YOUR_API_KEY",
      "confirmation_blocks": 12
    }
  ]
}
```

### `POST /networks/{network}/enable`

–í–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ç–∏.

**Response**:

```json
{
  "network": "ethereum",
  "enabled": true,
  "message": "Network ethereum has been enabled"
}
```

### `POST /networks/{network}/disable`

–û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–µ—Ç–∏.

**Response**:

```json
{
  "network": "ethereum",
  "enabled": false,
  "message": "Network ethereum has been disabled"
}
```

## üìä –°—Ç–∞—Ç—É—Å—ã –∏ –∫–æ–¥—ã –æ—à–∏–±–æ–∫

### üìà –°—Ç–∞—Ç—É—Å—ã —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–æ–≤

| Status       | Description         |
| ------------ | ------------------- |
| `pending`    | –û–∂–∏–¥–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏   |
| `processing` | –í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ |
| `completed`  | –£—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω    |
| `failed`     | –û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è   |

### ‚ùå HTTP –∫–æ–¥—ã –æ—à–∏–±–æ–∫

| Code  | Description               |
| ----- | ------------------------- |
| `200` | –£—Å–ø–µ—à–Ω–æ                   |
| `400` | –ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å           |
| `404` | –†–µ—Å—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω          |
| `422` | –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏          |
| `500` | –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ |
| `503` | –°–µ—Ä–≤–∏—Å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω         |

### üö® –ö–æ–¥—ã –æ—à–∏–±–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

| Code                   | Description          |
| ---------------------- | -------------------- |
| `WALLET_NOT_FOUND`     | –ö–æ—à–µ–ª–µ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω    |
| `INSUFFICIENT_BALANCE` | –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ |
| `INVALID_ADDRESS`      | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å   |
| `NETWORK_ERROR`        | –û—à–∏–±–∫–∞ —Å–µ—Ç–∏ –±–ª–æ–∫—á–µ–π–Ω |
| `INVALID_AMOUNT`       | –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—É–º–º–∞   |
| `TRANSFER_FAILED`      | –û—à–∏–±–∫–∞ —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞     |

## üîÑ Rate Limits

| Endpoint              | Limit       |
| --------------------- | ----------- |
| `/api/wallets`        | 100 req/min |
| `/api/transfers`      | 50 req/min  |
| `/api/tokens/balance` | 200 req/min |
| `/smart/*`            | 100 req/min |

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### üõí E-commerce checkout

```javascript
// 1. –°–æ–∑–¥–∞–µ–º –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const wallet = await fetch("/api/wallets", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ owner_id: `user_${userId}` }),
}).then((r) => r.json());

// 2. –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥—Ä–µ—Å –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
showDepositAddress(wallet.address);

// 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å
const balance = await fetch(`/api/wallets/${wallet.id}/balance`).then((r) =>
  r.json()
);

// 4. –°–æ–∑–¥–∞–µ–º —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä –ø–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
const transfer = await fetch("/api/transfers", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    from_wallet_id: wallet.id,
    order_amount: orderAmount,
    reference_id: orderId,
  }),
}).then((r) => r.json());

// 5. –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å
const checkStatus = setInterval(async () => {
  const status = await fetch(`/api/transfers/${transfer.id}`).then((r) =>
    r.json()
  );

  if (status.status === "completed") {
    clearInterval(checkStatus);
    completeOrder(orderId);
  }
}, 5000);
```

---

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏**:

- üìñ [gRPC API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](grpc-api.md)
- üîó [Multi-Chain API –ø—Ä–∏–º–µ—Ä—ã](multi-chain-api.md)
- üìù [–ö–æ–¥ –ø—Ä–∏–º–µ—Ä—ã](examples.md)


